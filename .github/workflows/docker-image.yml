name: Docker Image CI

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:

  build:

    runs-on: ["self-hosted", "1ES.Pool=oneml-test-300"]

    steps:
    - uses: actions/checkout@v3
    - name: Run a multi-line script
      run: |
          echo installing azurecli
          curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash

          az login \
            -t 72f988bf-86f1-41af-91ab-2d7cd011db47 \
            --identity

          az account show

          az acr login --name immunodata

          az acr show -n immunodata
          echo done
