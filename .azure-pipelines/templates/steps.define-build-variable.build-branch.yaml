# THIS FILE WAS GENERATED BY IMMUNODATA PLATFORM LIBRARIES.
# EDIT WITH CAUTION!

steps:
- script: |

    FULL_PR_BRANCH=$(System.PullRequest.SourceBranch)
    FULL_BUILD_BRANCH=$(Build.SourceBranch)
    if [ -z "$FULL_PR_BRANCH" ]
    then
        echo "We seem to be on a branch build!"
        BUILD_BRANCH="${FULL_BUILD_BRANCH/refs\/heads\//}"
    else
        echo "We seem to be in a PR build!"
        BUILD_BRANCH="${FULL_PR_BRANCH/refs\/heads\//}"
    fi
    echo "Generating Build Branch Name: $BUILD_BRANCH ($FULL_BUILD_BRANCH)"
    echo "##vso[task.setvariable variable=build_branch]$BUILD_BRANCH"
  displayName: 'Generate Build Branch Variable'
