# THIS FILE WAS GENERATED BY IMMUNODATA PLATFORM LIBRARIES.
# EDIT WITH CAUTION!

parameters:
  - name: subscription
    type: string
    default: "Immunomics R&D (7bd3802d-452e-4b2a-964e-e2c996bc7477)"
  # We can disable or change the location of reports with parameters.
  - name: publish_junit_reports
    type: boolean
    default: true
  - name: publish_coverage_reports
    type: boolean
    default: true
  - name: junit_path
    type: string
    default: '.tmp/*/reports/*-junit.xml'
  - name: coverage_path
    type: string
    default: '.tmp/*/reports/coverage.xml'

steps:

- task: PublishTestResults@2
  displayName: 'Publish: JUnit Reports'
  inputs:
    testResultsFormat: JUnit
    testResultsFiles: ${{ parameters.junit_path }}
    mergeTestResults: true
  condition: and(succeededOrFailed(), eq('${{ parameters.publish_junit_reports }}', true))

- task: PublishCodeCoverageResults@1
  displayName: 'Publish: Coverage Report'
  inputs:
    codeCoverageTool: Cobertura
    summaryFileLocation: ${{ parameters.coverage_path }}
  condition: and(succeededOrFailed(), eq('${{ parameters.publish_coverage_reports }}', true))
